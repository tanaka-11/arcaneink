<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ArcaneINK | Login</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous"
            />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
            />
        <link rel="stylesheet" href="css/style.css" />
        <link
            rel="shortcut icon"
            href="images/logo-preto.png"
            type="image/x-icon"
            />
    </head>

    <body class="bg-dark text-light">
        <!-- CABEÇALHO -->
        <header>
            <nav class="navbar navbar-expand-md bg-dark" data-bs-theme="dark">
                <div class="container-fluid d-flex flex-column align-items-center">
                    <a class="navbar-brand" href="index.html">
                        <img src="images/logo-branco.png" alt="Logo" />
                        <h1 class="logo-title" style="color: #cb002d">Arcane Ink</h1>
                    </a>

                    <button
                        class="navbar-toggler"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#navbarTogglerDemo02"
                        aria-controls="navbarTogglerDemo02"
                        aria-expanded="false"
                        aria-label="Toggle navigation"
                        >
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div
                        class="collapse navbar-collapse justify-content-center"
                        id="navbarTogglerDemo02"
                        >
                        <ul class="navbar-nav nav-underline mb-2 mb-lg-0">
                            <li class="nav-item">
                                <a class="nav-link" href="index.html">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="artistas.html">Tatuadores</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="estilos.html">Estilos</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="cadastro.html">Cadastro</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" href="login.html">Login</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>

        <!-- CONTEÚDO PRINCIPAL -->
        <main class="py-5" style="background-color: #000">
            <div class="container">
                <h1 class="text-center mb-4" style="color: #cb002d">Login</h1>

                <!-- ALERTA DE FEEDBACK (EXEMPLO) -->
                <p class="alert alert-warning text-center">Preencha e-mail e senha</p>

                <form th:action="@{/login}" method="post" class="p-4 rounded bg-body-tertiary text-dark">

                    <!-- EMAIL -->
                    <div class="form-floating m-3">
                        <input
                            class="form-control"
                            type="email"
                            id="email"
                            name="email"
                            placeholder="Digite seu e-mail"
                            required
                            />
                        <label for="email">E-mail</label>
                    </div>

                    <!-- SENHA -->
                    <div class="form-floating m-3">
                        <input
                            class="form-control"
                            type="password"
                            id="senha"
                            name="senha"
                            placeholder="Digite sua senha"
                            required
                            />
                        <label for="senha">Senha</label>
                    </div>

                    <!-- BOTÃO -->
                    <div class="text-center m-3">
                        <button
                            class="btn btn-danger px-5 py-2 fw-semibold"
                            type="submit"
                            name="entrar"
                            >
                            Entrar
                        </button>
                    </div>
                </form>
            </div>
        </main>

        <!-- RODAPÉ -->
        <footer>
            <div class="text-center text-bg-dark">
                <p class="p-4 pb-1 mb-0">Alguns direitos reservados &copy;</p>
                <div class="btn-group p-3">
                    <a
                        href="https://www.instagram.com/_tanaka11_"
                        target="_blank"
                        class="btn btn-outline-secondary"
                        ><i class="bi bi-instagram"></i
                        ></a>
                    <a
                        href="https://www.linkedin.com/in/devtanaka11/"
                        target="_blank"
                        class="btn btn-outline-secondary"
                        ><i class="bi bi-linkedin"></i
                        ></a>
                    <a
                        href="https://github.com/tanaka-11"
                        target="_blank"
                        class="btn btn-outline-secondary"
                        ><i class="bi bi-github"></i
                        ></a>
                </div>
            </div>
        </footer>

        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
            crossorigin="anonymous"
        ></script>
    </body>
</html>
<script>
    document.querySelector("form").addEventListener("submit", async function (e) {
        e.preventDefault(); // evita recarregar a página

        const usuario = {
            email: document.getElementById("email").value,
            senha: document.getElementById("senha").value
        };

        const response = await fetch("/api/usuario/login", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(usuario)
        });

        if (response.ok) {
            const data = await response.json();
            alert("Login realizado com sucesso! Bem-vindo " + data.nome);
            // aqui você pode redirecionar para outra página:
            // window.location.href = "index.html";
        } else {
            alert("Erro ao fazer login. Verifique e-mail e senha.");
        }
    });
</script>
